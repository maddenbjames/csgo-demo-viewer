{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Louis\\\\Desktop\\\\demoviewer\\\\client\\\\src\\\\pages\\\\HomePage.js\";\nimport React, { useState, useContext } from 'react';\nimport io from \"socket.io-client\";\nimport { Button, Jumbotron, Container, Form, Col } from 'react-bootstrap';\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport './HomePage.css';\nimport { useHistory } from 'react-router-dom';\nimport axios from \"axios\";\nimport { SocketContext } from \"./contexts/SocketProvider\";\nimport { GameContext } from \"./contexts/GameProvider\";\n\nfunction CreateForm(props) {\n  const setGame = useContext(GameContext);\n  const history = useHistory();\n  const [file, setFile] = useState();\n  const [fileName, setFileName] = useState(\"Choose Demo to Upload...\");\n  const [fileStatus, setFileStatus] = useState(0);\n  const [fileStatusName, setFileStatusName] = useState(\"\");\n\n  function handleFile(e) {\n    const file = e.target.files[0];\n\n    if (!file) {\n      setFileStatusName(\"No file selected\");\n      setFileStatus(-1);\n      return;\n    } else if (!file.name.match(/\\.(dem)$/)) {\n      setFileStatusName(\"Invalid file format\");\n      setFileStatus(-1);\n      setFileName(file.name);\n      return;\n    } else if (file.size > 419430400) {\n      setFileStatusName(\"File size too big\");\n      setFileStatus(-1);\n      setFileName(file.name);\n      return;\n    } else {\n      setFileStatus(1);\n      setFileName(file.name);\n      setFile(file);\n    }\n  }\n\n  function handleSubmit(e) {\n    e.preventDefault();\n    const formData = new FormData();\n    formData.append(\"file\", file); // Uploads selected demo file\n\n    axios.post(\"/upload\", formData, {\n      headers: {\n        'Content-Type': 'multipart/form-data'\n      } // If server is successful in processing demo, it sends back a room code/permission used to create a websocket room\n\n    }).then(res => {\n      setGame(res.data);\n    });\n  }\n\n  return /*#__PURE__*/React.createElement(Form, {\n    onSubmit: handleSubmit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Form.Row, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Col, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Form.File, {\n    id: \"formcheck-api-custom\",\n    custom: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(Form.File.Input, {\n    isValid: fileStatus > 0,\n    isInvalid: fileStatus < 0,\n    onChange: handleFile,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 25\n    }\n  }), /*#__PURE__*/React.createElement(Form.File.Label, {\n    \"data-browse\": \"Browse\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 25\n    }\n  }, fileName), /*#__PURE__*/React.createElement(Form.Control.Feedback, {\n    type: \"invalid\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 25\n    }\n  }, fileStatusName))), /*#__PURE__*/React.createElement(Col, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    variant: \"create\",\n    type: \"submit\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 21\n    }\n  }, \"Create Session\"))));\n}\n\nfunction JoinForm(props) {\n  const history = useHistory();\n  const [textValue, setTextValue] = useState(\"\");\n\n  function handleChange(e) {\n    setTextValue(e.target.value.toUpperCase(), () => e.target.setSelectionRange(e.target.start, e.target.end));\n  }\n\n  function handleSubmit(e) {\n    e.preventDefault(); // ADD: check for validity of joincode\n    //\n\n    const socket = io(props.endpoint);\n    socket.emit(\"joinRoom\", textValue);\n    socket.on(\"joinResponse\", data => {\n      if (data.status == false) alert(data.statusMsg);else {\n        history.push(\"/watch\");\n        props.gameCallback(data.game);\n      }\n    });\n  }\n\n  return /*#__PURE__*/React.createElement(Form, {\n    onSubmit: handleSubmit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Form.Row, {\n    className: \"align-items-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Col, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Form.Control, {\n    type: \"text\",\n    placeholder: \"Enter Join Code\",\n    value: textValue,\n    onChange: handleChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 21\n    }\n  })), /*#__PURE__*/React.createElement(Col, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    variant: \"join\",\n    type: \"submit\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 21\n    }\n  }, \"Join Session\"))));\n}\n\nfunction HomePage(props) {\n  return /*#__PURE__*/React.createElement(Container, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Jumbotron, {\n    id: \"createSessionSection\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(CreateForm, {\n    endpoint: props.endpoint,\n    createRoomCallback: props.createRoomCallback,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 136,\n      columnNumber: 17\n    }\n  })), /*#__PURE__*/React.createElement(Jumbotron, {\n    id: \"joinSessionSection\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(JoinForm, {\n    endpoint: props.endpoint,\n    gameCallback: props.gameCallback,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 17\n    }\n  })));\n}\n\nexport default HomePage;","map":{"version":3,"sources":["C:/Users/Louis/Desktop/demoviewer/client/src/pages/HomePage.js"],"names":["React","useState","useContext","io","Button","Jumbotron","Container","Form","Col","useHistory","axios","SocketContext","GameContext","CreateForm","props","setGame","history","file","setFile","fileName","setFileName","fileStatus","setFileStatus","fileStatusName","setFileStatusName","handleFile","e","target","files","name","match","size","handleSubmit","preventDefault","formData","FormData","append","post","headers","then","res","data","JoinForm","textValue","setTextValue","handleChange","value","toUpperCase","setSelectionRange","start","end","socket","endpoint","emit","on","status","alert","statusMsg","push","gameCallback","game","HomePage","createRoomCallback"],"mappings":"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","sourcesContent":["import React, {useState, useContext} from 'react';\r\nimport io from \"socket.io-client\";\r\nimport { Button, Jumbotron, Container, Form, Col} from 'react-bootstrap';\r\nimport 'bootstrap/dist/css/bootstrap.min.css';\r\nimport './HomePage.css';\r\nimport {useHistory} from 'react-router-dom';\r\nimport axios from \"axios\";\r\nimport {SocketContext} from \"./contexts/SocketProvider\";\r\nimport {GameContext} from \"./contexts/GameProvider\";\r\n\r\n\r\nfunction CreateForm(props){\r\n    const setGame = useContext(GameContext);\r\n    const history = useHistory();\r\n    const [file, setFile] = useState();\r\n    const [fileName, setFileName] = useState(\"Choose Demo to Upload...\");\r\n    const [fileStatus, setFileStatus] = useState(0);\r\n    const [fileStatusName, setFileStatusName] = useState(\"\");\r\n\r\n\r\n    function handleFile(e){\r\n        const file = e.target.files[0];\r\n\r\n        if(!file){\r\n            setFileStatusName(\"No file selected\");\r\n            setFileStatus(-1);\r\n            return;\r\n        }\r\n\r\n        else if(!file.name.match(/\\.(dem)$/)){\r\n            setFileStatusName(\"Invalid file format\");\r\n            setFileStatus(-1);\r\n            setFileName(file.name);\r\n            return;\r\n        }\r\n\r\n        else if(file.size > 419430400){\r\n            setFileStatusName(\"File size too big\");\r\n            setFileStatus(-1);\r\n            setFileName(file.name);\r\n            return;\r\n        }\r\n        else{\r\n            setFileStatus(1);\r\n            setFileName(file.name);\r\n            setFile(file);\r\n        }\r\n    }\r\n\r\n    function handleSubmit(e){\r\n        e.preventDefault();\r\n        \r\n        const formData = new FormData();\r\n        formData.append(\"file\", file);\r\n\r\n        // Uploads selected demo file\r\n        axios.post(\"/upload\", formData, {\r\n            headers: {\r\n                'Content-Type': 'multipart/form-data'\r\n            }\r\n        \r\n        // If server is successful in processing demo, it sends back a room code/permission used to create a websocket room\r\n        }).then(res=> {\r\n            setGame(res.data);\r\n        });\r\n    }\r\n\r\n\r\n\r\n    return(\r\n        <Form onSubmit={handleSubmit}>\r\n            <Form.Row>\r\n                <Col>\r\n                    <Form.File id=\"formcheck-api-custom\" custom> \r\n                        <Form.File.Input isValid = {fileStatus > 0} isInvalid = {fileStatus < 0} onChange ={handleFile}/>\r\n                        <Form.File.Label data-browse=\"Browse\">\r\n                            {fileName}\r\n                        </Form.File.Label>\r\n                        <Form.Control.Feedback type=\"invalid\">{fileStatusName}</Form.Control.Feedback>\r\n                    </Form.File>\r\n                    \r\n                </Col>\r\n                <Col>   \r\n                    <Button variant=\"create\" type = \"submit\">Create Session</Button>\r\n                </Col>\r\n            </Form.Row>\r\n        </Form>\r\n    );\r\n}\r\n\r\nfunction JoinForm(props){\r\n    const history = useHistory();\r\n    const [textValue, setTextValue] = useState(\"\");\r\n\r\n    function handleChange(e){\r\n        setTextValue(e.target.value.toUpperCase(), ()=> e.target.setSelectionRange(e.target.start,e.target.end));\r\n    }\r\n\r\n    function handleSubmit(e){\r\n        e.preventDefault();\r\n        \r\n        // ADD: check for validity of joincode\r\n        //\r\n        const socket = io(props.endpoint);\r\n\r\n        socket.emit(\"joinRoom\", textValue);\r\n        socket.on(\"joinResponse\", (data)=>{\r\n            if(data.status == false)\r\n                alert(data.statusMsg);\r\n            else{\r\n                history.push(\"/watch\");\r\n                props.gameCallback(data.game);\r\n            }\r\n        })\r\n    }\r\n\r\n    return(\r\n        <Form onSubmit = {handleSubmit}>\r\n            <Form.Row className=\"align-items-center\">\r\n                <Col>\r\n                    <Form.Control type=\"text\" placeholder=\"Enter Join Code\" value = {textValue} onChange = {handleChange}/>\r\n                </Col>\r\n                <Col>\r\n                    <Button variant=\"join\" type = \"submit\">Join Session</Button>\r\n                </Col>\r\n            </Form.Row>\r\n        </Form>\r\n    );\r\n}\r\n\r\nfunction HomePage(props){\r\n\r\n    return(\r\n        <Container>\r\n            <Jumbotron id = \"createSessionSection\" >\r\n                <CreateForm endpoint={props.endpoint} createRoomCallback = {props.createRoomCallback}/>\r\n            </Jumbotron>\r\n            <Jumbotron id = \"joinSessionSection\" >\r\n                <JoinForm endpoint = {props.endpoint} gameCallback = {props.gameCallback}/>\r\n            </Jumbotron>    \r\n        </Container>\r\n    )\r\n}\r\n\r\nexport default HomePage;\r\n"]},"metadata":{},"sourceType":"module"}